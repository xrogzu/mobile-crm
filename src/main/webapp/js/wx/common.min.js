function footerSkip(){$("footer .account").bind("click",function(){location.href=apppath+"/wx/account/list.action?"+ddcommparams}),$("footer .opportunity").bind("click",function(){location.href=apppath+"/wx/opportunity/list.action?"+ddcommparams}),$("footer .service").bind("click",function(){location.href=apppath+"/wx/serveice/index.action?"+ddcommparams}),$("footer .index").bind("click",function(){location.href=apppath+"/wx/statics/index.action?"+ddcommparams})}function errInfo(){GetQueryString("err")&&("acc_deleted"==GetQueryString("err")?myDialog("该公司已被删除","without"):"con_deleted"==GetQueryString("err")?myDialog("该联系人已被删除","without"):"opp_deleted"==GetQueryString("err")?myDialog("该商机已被删除","without"):"acc_noright"==GetQueryString("err")?myDialog("您无权查看该公司","without"):"con_noright"==GetQueryString("err")?myDialog("您无权查看该联系人","without"):"opp_noright"==GetQueryString("err")&&myDialog("您无权查看该商机","without"))}function stopScroll(e){function t(e){e.preventDefault()}e.bind("touchmove",t,!1)}function control_back(e){}function set_back(e){}function set_cir_color(e){null==e.color&&(e.color=arr_color[Math.floor(Math.random()*arr_color.length)]),e.css("backgroundColor",e.color)}function set_title(e){}function remove_rTop(){}function set_right(e,t){}function checkTable(e){$(".ct").remove();var t=$('<div class="ct" id="ct"></div>'),a=$('<a href="javascript:;" class="btn-reset">取消</a>');t.append(a),$("body").append(t),$(window).scrollTop(0),$("body").css({height:"100%",overflow:"hidden"}),set_title(e),remove_rTop(),checkTableReset(a)}function checkTableReset(e){$(e).on("click",function(){$(".ct").remove(),$(".load-shadow").hide(),$("body").css({overflow:"scroll",height:"auto"})})}function textarea_num(){var e=$("#textarea").val().length;$("#num").text(e+"/1000"),$("#textarea").bind("input",function(){$(this).val().length>1e3&&$(this).val($(this).val().substr(0,1e3)),$("#num").text($(this).val().length+"/1000")})}function reg_exp(e,t){e.bind("click",function(){$(this).css("background","")}),e.bind("blur",function(){confirm_reg(e,t)})}function confirm_reg(e,t){add_warn(e,t)}function rtn_reg(e,t){return!!t.test(e.val())}function GetQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);return null!=a?decodeURI(a[2]):null}function btn_color_adjust(){$("button").each(function(){"点击选择"!=$(this).html()?$(this).addClass("active"):$(this).removeClass("active")})}function input_color_adjust(){$("input").each(function(){$(this).bind("input",function(){null!=$(this).val()?$(this).addClass("active"):$(this).removeClass("active")})}),$("textarea").each(function(){$(this).bind("input",function(){console.log("1"),null!=$(this).val()?$(this).addClass("active"):$(this).removeClass("active")})})}function add_warn(e,t){e.addClass("warn");var a=$('<div class="warning"><span>'+t+"</span></div>");e.parent().parent().css({marginBottom:"70px"}),e.parent().append(a),e.bind("click",function(){remove_warn(e)}),e.bind("blur",function(){remove_warn(e)}),"saleStageId"==e.parent().parent().attr("id")&&e.bind("click",function(){$("#winRate").find(".warning").remove(),$("#winRate").find("input").removeClass("warn")})}function remove_warn(e){e.removeClass("warn"),e.parent().parent().css({marginBottom:"0px"}),e.parent().find(".warning").remove()}function btn_touch_style(){$(".confirm").bind("touchstart",function(){$(this).addClass("touching")}),$(".confirm").bind("touchend",function(){$(this).removeClass("touching")})}function create_record(e,t){function a(){var e=GetQueryString("from");"acc_info"==e?location.href=apppath+"/wx/account/info.action?"+ddcommparams+"&accountId="+GetQueryString("accountId"):"con_info"==e||"con_list"==e?location.href=apppath+"/wx/contact/info.action?"+ddcommparams+"&contactId="+GetQueryString("contactId"):"opp_info"==e&&(location.href=apppath+"/wx/opportunity/detail.action?"+ddcommparams+"&opportunityId="+GetQueryString("opportunityId"))}$.ajax({url:apppath+"/wx/activityrecord/docreate.action",contentType:"application/x-www-form-urlencoded",data:e,type:"post",beforeSend:function(){t.attr("disabled",!0),loader()},dataType:"json",success:function(i){if($(".loaderArea").remove(),1==i.success){if(e.activityTypeId==activeRecordTypeOje.SIGN_IN);else;myDialog("创建成功"),setTimeout(function(){a()},2e3)}else"0000002"==i.entity.status?(myAlert("创建失败，不能包含表情符"),t.removeAttr("disabled")):i.entity&&i.entity.status&&"0000003"==i.entity.status?location.href=apppath+"/wx/authorized/no.action?"+ddcommparams:(t.removeAttr("disabled"),myAlert("创建失败"))},error:function(e,a,i){$(".loaderArea").remove(),t.removeAttr("disabled"),myAlert("网络不给力，请重新加载")}})}function myAlert(e){$(".UPS").remove();var t=$('<div class="commonShadow UPS"></div>'),a=$('<div class="alert"><span>'+e+"</span><div>确定</div></div>");a.find("div").bind("click",function(){$(this).parent().parent().remove()}),t.append(a),$("body").append(t),stopScroll($(".commonShadow")),stopScroll($(".alert"))}function myDialog(e,t){if($(".UPS").remove(),"without"==t)var a=$('<div class="dialog_without_pic UPS">'+e+"</div>");else var a=$('<div class="dialog UPS">'+e+"</div>");$("body").append(a),setTimeout(function(){$(".dialog").remove(),$(".dialog_without_pic").remove()},2e3)}function time_out_location(e){setTimeout(function(){location.href=e},2e3)}function myChoose(e,t){$(".UPS").remove();var a=$('<div class="chooseShadow UPS"><div class="dia"><p class="boxSizing">确定放弃操作并退出吗？</p><div class="chooseBtn"><div class="n">取消</div><div class="y boxSizing">确认</div></div></div></div>');$("body").append(a),$(".dia").css({top:"200px",left:($(window).width()-$(".dia").width())/2}),$(".y").bind("click",function(){$(".chooseShadow").remove(),""!=e?location.href=e:t&&t()}),$(".n").bind("click",function(){$(".chooseShadow").remove()})}function myConfirm(e){$(".UPS").remove();var t=$('<div class="chooseShadow UPS"><div class="dia"><p class="boxSizing">'+e+'</p><div class="chooseBtn"><div class="n">取消</div><div class="y boxSizing">确认</div></div></div></div>');$("body").append(t),$(".dia").css({top:"200px",left:($(window).width()-$(".dia").width())/2})}function input_adjust(){$("input").bind("blur",function(){var e=$(this).val();$(this).val(e.trim())})}function loader(){var e=$('<div class="loaderArea"><div class="loader"></div><span>加载中…</span></div>');$("body").append(e)}function buriedPoint(e){}function doChangeOwner(e,t){var a=$('<div class="cOwnerShadow"><div class="cOwner boxSizing"><div class="topInfo boxSizing"><p><span class="word">确认将联系人变更为:"</span><span class="ownerName">'+e+'</span><span class="word">",</span></p><p>变更后将失去相关权限</p></div><div class="botBtn"><div class="no boxSizing">取消</div><div class="yes boxSizing">确认</div></div></div></div>');a.find(".yes").bind("click",function(){a.remove(),t()}),a.find(".no").bind("click",function(){a.remove()}),$("body").append(a)}function getPropertyname(e){var t=e.propertyname;return null==t&&(t=e.propertyName),t}function customizItem(e,t,a){switch("undefined"==typeof a&&(a={}),t.type){case"ITEM_TYPE_LINE":e.append("<div id="+getPropertyname(t)+' class="item boxSizing item-title"><div class="line-content"><span class="linetag">'+t.label+"</span></div></div>");break;case"ITEM_TYPE_TEXT":var i="";if(1==t.required){if(i='<span class="red">*</span>',"state"==getPropertyname(t)||"city"==getPropertyname(t))return;if("region"==getPropertyname(t)){var n="省市区";e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'" required="'+t.required+'"><div class="bor"><span class="tag">'+i+'<span class="tagtitle">'+n+'</span></span><input save="needSave" arequired="'+t.required+'" type="text" id="region1" maxlength='+t.length+' placeholder="点击输入" atype="text"/></div></div>')}else e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'" required="'+t.required+'"><div class="bor"><span class="tag">'+i+'<span class="tagtitle">'+t.label+'</span></span><input save="needSave" arequired="'+t.required+'" type="text" maxlength='+t.length+' placeholder="点击输入" atype="text"/></div></div>')}else{if("state"==getPropertyname(t)||"city"==getPropertyname(t))return;if("region"==getPropertyname(t)){var n="省市区";e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'" required="'+t.required+'"><div class="bor"><span class="tag">'+i+'<span class="tagtitle">'+n+'</span></span><input save="needSave" arequired="'+t.required+'" type="text" id="region1" maxlength='+t.length+' placeholder="点击输入" atype="text"/></div></div>')}else e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'" required="'+t.required+'"><div class="bor"><span class="tag"><span class="tagtitle">'+t.label+'</span></span><input type="text" save="needSave" arequired="'+t.required+'" maxlength='+t.length+' placeholder="点击输入" atype="text"/></div></div>')}break;case"ITEM_TYPE_SELECT":var i="";1==t.required&&(i='<span class="red">*</span>'),a[getPropertyname(t)+"List"]=t.selectitem,e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'" required="'+t.required+'"><div class="bor"><span class="tag">'+i+'<span class="tagtitle">'+t.label+'</span></span><button save="needSave" arequired="'+t.required+'"  atype="button">点击选择</button></div></div>');break;case"ITEM_TYPE_INTEGER":var i="";1==t.required&&(i='<span class="red">*</span>'),e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'" required="'+t.required+'"><div class="bor"><span class="tag">'+i+'<span class="tagtitle">'+t.label+'</span></span><input save="needSave"  arequired="'+t.required+'" type="number" maxlength='+t.length+' placeholder="点击输入" atype="text"/></div></div>');break;case"ITEM_TYPE_REAL":var i="";1==t.required&&(i='<span class="red">*</span>'),e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'" required="'+t.required+'"><div class="bor"><span class="tag">'+i+'<span class="tagtitle">'+t.label+'</span></span><input save="needSave" arequired="'+t.required+'"  type="number" maxlength='+t.length+' placeholder="点击输入" atype="text"/></div></div>');break;case"ITEM_TYPE_TEXTAREA":var i="";1==t.required&&(i='<span class="red">*</span>'),e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'" required="'+t.required+'"><textarea name="" id="textarea" placeholder="请填写备注内容…" save="needSave" maxlength='+t.length+' arequired="'+t.required+'"  atype="textarea"></textarea><span id="num">0/1000</span></div>');break;case"ITEM_TYPE_DATE":var i="";1==t.required&&(i='<span class="red">*</span>'),e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'" required="'+t.required+'"><div class="bor"><span class="tag">'+i+'<span class="tagtitle">'+t.label+'</span></span><input save="needSave" id="datetime" arequired="'+t.required+'" type="text" maxlength='+t.length+' placeholder="点击输入" atype="text"/></div></div>');break;case"ITEM_TYPE_CHECKBOX":var i="";1==t.required&&(i='<span class="red">*</span>'),a[getPropertyname(t)+"List"]=t.checkitem,e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'"  required="'+t.required+'"><div class="bor"><span class="tag">'+i+'<span class="tagtitle">'+t.label+'</span></span><button save="needSave" arequired="'+t.required+'"  atype="button">点击选择</button></div></div>');break;case"ITEM_TYPE_SEQUENCE":var i="";1==t.required&&(i='<span class="red">*</span>'),e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'" required="'+t.required+'"><div class="bor"><span class="tag">'+i+'<span class="tagtitle">'+t.label+'</span></span><input save="needSave"  arequired="'+t.required+'" type="text"  maxlength='+t.length+'  atype="text"/></div></div>');break;case"ITEM_TYPE_RELATION":var i="";1==t.required&&(i='<span class="red">*</span>'),e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'" required="'+t.required+'"><div class="bor"><span class="tag">'+i+'<span class="tagtitle">'+t.label+'</span></span><button save="needSave" arequired="'+t.required+'"  atype="button">点击选择</button></div></div>');break;case"ITEM_TYPE_PHOTO":var i="";1==t.required&&(i='<span class="red">*</span>'),e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'" required="'+t.required+'"><div class="bor"><span class="tag">'+i+'<span class="tagtitle">'+t.label+'</span></span><img save="needSave" arequired="'+t.required+'" src="'+t.src+'" alt="" /></div></div>');break;case"ITEM_TYPE_DUMMY":var i="";if(1==t.required&&(i='<span class="red">*</span>'),a[getPropertyname(t)+"List"]=t.dummyItemBean,"accountName"==getPropertyname(t))return void e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'" required="'+t.required+'"><div class="bor"><span class="tag">'+i+'<span class="tagtitle">'+t.label+'</span></span><input save="needSave" arequired="'+t.required+'" type="text" maxlength='+t.length+' placeholder="点击输入" atype="text"/><span class="entity-search"><i></i></span></div></div>');if("industryId"==getPropertyname(t))return void e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'"  required="'+t.required+'"><div class="bor"><span class="tag">'+i+'<span class="tagtitle">'+t.label+'</span></span><button save="needSave" arequired="'+t.required+'"  atype="button">点击选择</button></div></div>');if("campaignId"==getPropertyname(t))return;if("comment"==getPropertyname(t))return void e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'" required="'+t.required+'"><textarea name="" id="textarea" placeholder="请填写备注内容…" save="needSave" maxlength='+t.length+' arequired="'+t.required+'"  atype="textarea"></textarea><span id="num">0/1000</span></div>');if("dimDepart"==getPropertyname(t))return void e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'"  required="'+t.required+'"><div class="bor"><span class="tag">'+i+'<span class="tagtitle">'+t.label+'</span></span><button save="needSave" arequired="'+t.required+'"  atype="button">点击选择</button></div></div>');if("accountId"==getPropertyname(t)||"sourceId"==getPropertyname(t)||"saleStageId"==getPropertyname(t)||"ownerId"==getPropertyname(t))return void e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'"  required="'+t.required+'"><div class="bor"><span class="tag">'+i+'<span class="tagtitle">'+t.label+'</span></span><button save="needSave" arequired="'+t.required+'"  atype="button">点击选择</button></div></div>');if("birthday"==getPropertyname(t))return void e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'" required="'+t.required+'"><div class="bor"><span class="tag">'+i+'<span class="tagtitle">'+t.label+'</span></span><input save="needSave" id="datetime" arequired="'+t.required+'" type="text" maxlength='+t.length+' placeholder="点击输入" atype="text"/></div></div>');if("phone"==getPropertyname(t)||"zipCode"==getPropertyname(t)||"mobile"==getPropertyname(t))return void e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'" required="'+t.required+'"><div class="bor"><span class="tag">'+i+'<span class="tagtitle">'+t.label+'</span></span><input save="needSave" arequired="'+t.required+'" type="number" maxlength='+t.length+' placeholder="点击输入" atype="text"/></div></div>');e.append("<div id="+getPropertyname(t)+' class="item boxSizing" btype="'+t.type+'" required="'+t.required+'"><div class="bor"><span class="tag">'+i+'<span class="tagtitle">'+t.label+'</span></span><input save="needSave" arequired="'+t.required+'" type="text" maxlength='+t.length+' placeholder="点击输入" atype="text"/></div></div>')}}function setPropertyname(e){var t=e.propertyname;return null==t&&(t=e.propertyName),t}function set_infoSup(e,t,a){var i,n,r=t.entity.data[e];switch($.each(t.entity.structure.components,function(t,i){a?e==i.id&&(n=i):e!=i.propertyname&&e!=i.propertyName||(n=i)}),n.type){case"ITEM_TYPE_TEXT":i=r;break;case"ITEM_TYPE_TEXTAREA":i=r;break;case"ITEM_TYPE_SEQUENCE":i=r;break;case"ITEM_TYPE_REAL":i=r;break;case"ITEM_TYPE_INTEGER":i=r;break;case"ITEM_TYPE_DATE":i=r;break;case"ITEM_TYPE_SEQUENCE":i=r;break;case"ITEM_TYPE_SELECT":var s=t.entity.expandPro[setPropertyname(n)+"Text"];i={value:r,text:s};break;case"ITEM_TYPE_CHECKBOX":var s=t.entity.expandPro[setPropertyname(n)+"Text"];i={value:r,text:s};break;case"ITEM_TYPE_RELATION":var s=t.entity.expandPro[setPropertyname(n)+"Text"];i={value:r,text:s};break;case"ITEM_TYPE_DUMMY":if("accountId"==n.propertyName||"industryId"==n.propertyName||"parentAccountId"==n.propertyName||"level"==n.propertyName||"dimDepart"==n.propertyName||"createdBy"==n.propertyName||"updatedBy"==n.propertyName||"sourceId"==n.propertyName||"saleStageId"==n.propertyName||"ownerId"==n.propertyName){var s=t.entity.expandPro[setPropertyname(n)+"Text"];i=""==s?{value:null,text:s}:{value:r,text:s}}else i=r}return i}function regingData(){var e=$("*[save='needSave']");console.log(e);var t=!0;return $.each(e,function(a,i){var n=e[a],r=$(n).prev().find(".tagtitle").text(),s=$(n).attr("arequired"),o=$(n).attr("maxlength"),c=$(n).attr("atype");"false"==s&&"text"==c&&$.trim(n.value).length>o&&(confirm_reg($(n),""+r+"输入内容长度不正确,最多能输入"+o+"个字符"),t=!1),"true"==s&&("text"==c?(""==$.trim(n.value)&&(confirm_reg($(n),""+r+"不能为空"),t=!1),$.trim(n.value).length>o&&(confirm_reg($(n),""+r+"输入内容长度不正确,最多能输入"+o+"个字符"),t=!1)):"button"==c?""!=$.trim(n.innerHTML)&&"点击选择"!=$.trim(n.innerHTML)||(confirm_reg($(n),""+r+"不能为空"),t=!1):"textarea"==c&&""==$.trim(n.val())&&(confirm_reg($(n),""+r+"不能为空"),t=!1))}),t}function validateFn(e,t){var a=/^\d+|[-#*]{1,30}$/,i=/^(([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})){0,100}$/;return"phone"==t?a.match():"email"==t?i.match():void 0}function selectDate(){if("set"!=GetQueryString("type")){var e=new Date,t=(e.getFullYear(),e.getMonth()+1),a=e.getDate();10>t&&(t="0"+String(t)),10>a&&(a="0"+String(a))}var i=document.getElementById("datetime"),n=new window.DatePicker({confirmCbk:function(e){var t=e.month,a=e.day;e.month<10&&(t="0"+t),10>a&&(a="0"+a),i.value=e.year+"-"+t+"-"+a}});i.onfocus=function(e){i.blur(),n.open()}}function dimdepart_choose(){$("#dimDepart").bind("click",function(){checkTable("选择所属部门"),$.ajax({type:"get",url:apppath+"/wx/department/mydepartment.action",async:!0,dataType:"json",success:function(e){0==e.success?myAlert("网络不给力，请重新加载"):(postData=e,create_dimdepart_list(e),$("#dimDepart").attr("value",postData.entity.departs[0].id),$("#dimDepart  button").html(postData.entity.departs[0].text))},error:function(){myAlert("网络不给力，请重新加载")}})})}function create_dimdepart_list(e){for(var t=$('<div class="container"></div>'),a=0,i=e.entity.departs.length;i>a;a++){var n=$('<div class="item boxSizing"><em class="radio"><i></i></em><span>'+e.entity.departs[a].text+"</span></div>");n.attr("value",e.entity.departs[a].id),t.append(n)}$(".ct").append(t),t.find('.item[value="'+$("#dimDepart button").attr("value")+'"] em').addClass("active"),$(".ct .item").each(function(t){$(this).bind("click",function(){$(this).find("em").addClass("active"),$(this).siblings().find("em").removeClass("active");var t=e.entity.departs[$(this).index()].id,a=($(this).index(),e.entity.departs[$(this).index()].text);$("#dimDepart button").html(a),btn_color_adjust(),$("#dimDepart button").attr("value",t),$(".ct").remove(),$("body").css({overflow:"scroll",height:"auto"})})})}function build_end(e,t){var a=$('<div id="'+t+'" class="end_info">'+e+"</div>");$(".ct").append(a)}function accountPost(){$("#accountId button").bind("click",function(){checkTable("选择公司"),accountpageNo=0,loadaccountList(0,20,!1)})}function loadaccountList(e,t,a){var i=$("#accountId").find("button");$.ajax({type:"get",url:apppath+"/wx/account/dolist.action",async:!0,data:{pageNo:e,pagesize:t},dataType:"json",success:function(e){if(0==e.success)myAlert("网络不给力，请重新加载");else if(0==e.entity.totalSize)myAlert("暂无公司，请新建公司"),$(".ct").remove();else{for(var t=0,n=e.entity.records.length;n>t;t++)accountArr.push(e.entity.records[t]);if(0==e.entity.records.length){var r=$('<div class="content-reminder"><div class="ico"><p>暂无数据</p></div></div>');$(".ct").append(r)}else $(".ct").append(warp),create_account_list(e,i,a);$(".ct").find(".item").length<e.entity.totalSize?($("#loading").remove(),build_end("加载更多","load_more"),accountlistLoaded()):$("#loading").remove()}}})}function create_account_list(e,t,a){console.log(e);for(var i=$('<div class="container account_container"></div>'),n=0,r=e.entity.records.length;r>n;n++){var s=e.entity.records[n].accountName,o=e.entity.records[n].id,c=$("<a  id="+o+' class="item boxSizing"><em class="radio"><i></i></em><span>'+s+"</span></a>");i.append(c),$(".ct").addClass("account-warp")}a||$(warp).empty(),$(warp).append(i);for(var n=0,r=$(".ct .item").length;r>n;n++){var d=$("#accountId button").attr("value");d==$(".ct .item").eq(n).attr("id")&&$(".ct .item").eq(n).find("em").addClass("active")}$(".ct .item").length;$(".ct .item").off("tap click").on("tap click",function(e){$(this).find("em").addClass("active"),$(this).siblings().find("em").removeClass("active");var a=$(this).attr("id"),i=$(this).find("span").text();$(t).html(i),btn_color_adjust(),$(t).attr("value",a),$(".ct").remove(),$("body").css({overflow:"scroll",height:"auto"})})}function accountlistLoaded(){accountlistScroll=new IScroll("#ct",{probeType:1,mouseWheel:!0,preventDefault:!1,scrollbars:!1,momentum:!1,useTransform:!1,click:!0,tap:!0,bounceTime:200,mouseWheelSpeed:200}),accountlistScroll.on("scrollStart",function(){$("#load_more").length>0&&($("#load_more").remove(),build_end("加载中…","loading"),accountpageNo+=1,loadaccountList(accountpageNo,20,!0))}),accountlistScroll.on("scrollEnd",function(){$("#loading").remove()})}function SelectItemPost(){$("#basic_info .item").each(function(e){if("ITEM_TYPE_SELECT"==$(this).attr("btype")){var t=$(this).find("span.tagtitle").text(),a=$(this).attr("id")+"List";$(this).find("button").bind("click",function(){checkTable(t),createSelectList(selectitmeObj[a],$(this))})}})}function createSelectList(e,t){for(var a=$('<div class="container"></div>'),i=0,n=e.length;n>i;i++){var r=$('<div class="item 33 boxSizing" value="'+e[i].value+'"  href="'+e[i].value+'"><em class="radio"><i></i></em><span>'+e[i].label+"</span></div>");a.append(r)}$(".ct").append(a),a.find('.item[value="'+$(t).attr("value")+'"] em').addClass("active"),$(".ct .item").on("click",function(a){$(this).find("em").addClass("active"),$(this).siblings().find("em").removeClass("active");var i=e[$(this).index()].value,n=($(this).index(),e[$(this).index()].label);$(t).html(n),btn_color_adjust(),$(t).attr("value",i),$(".ct").remove(),$("body").css({overflow:"scroll",height:"auto"})})}function DummyItemPost(){$("#basic_info .item").each(function(e){if("ITEM_TYPE_DUMMY"==$(this).attr("btype")){if("accountName"==$(this).attr("id")||"ownerId"==$(this).attr("id")||"dimDepart"==$(this).attr("id")||"accountId"==$(this).attr("id"))return;if($(this).find("button").size()){var t=$(this).find("span.tagtitle").text(),a=$(this).attr("id")+"List";$(this).find("button").bind("click",function(){checkTable(t),createDummyList(selectitmeObj[a],$(this))})}}})}function createDummyList(e,t){for(var a=$('<div class="container"></div>'),i=0,n=e.length;n>i;i++){var r=$('<div class="item boxSizing" value="'+e[i].value+'"><em class="radio"><i></i></em><span>'+e[i].label+"</span></div>");a.append(r)}$(".ct").append(a),a.find('.item[value="'+$(t).attr("value")+'"] em').addClass("active"),$(".ct .item").on("click",function(a){$(this).find("em").addClass("active"),$(this).siblings().find("em").removeClass("active");var i=e[$(this).index()].value,n=e[$(this).index()].label;if($(t).html(n),"saleStageId"==$(t).parent().parent().attr("id")){var r=e[$(this).index()].percent;$("#winRate input").val(r),$("#winRate input").attr("readonly",!0)}btn_color_adjust(),$(t).attr("value",i),$(".ct").remove(),$("body").css({overflow:"scroll",height:"auto"})})}function checkboxItemPost(){$("#basic_info .item").each(function(e){if("ITEM_TYPE_CHECKBOX"==$(this).attr("btype")&&$(this).find("button").size()){var t=$(this).find("span.tagtitle").text(),a=$(this).attr("id")+"List";$(this).find("button").bind("click",function(){checkTable(t),$(".ct").addClass("multiple");var e=$('<div id="container" class="container"></div>');$(".ct").append(e),checkboxDummyList(e,selectitmeObj[a],$(this))})}})}function checkboxDummyList(e,t,a){for(var i=0,n=t.length;n>i;i++){var r=t[i].value,s=t[i].label,o=$('<div class="item boxSizing" id = "'+r+'" atext = "'+s+'"><em class="checkbox"></em><span>'+s+"</span></div>");o.attr("value",r),e.append(o)}checkboxMember=$(a).attr("value").split(",");for(var c=0;c<checkboxMember.length;c++)for(var i=0,n=t.length;n>i;i++){var r=$(".ct .item").eq(i).attr("id");$.trim(checkboxMember[c])==r&&$(".ct .item").eq(i).find("em").addClass("active")}checkboxClick(t),createConfirm(t,a)}function checkboxClick(e){$(".item").each(function(e){$(this).bind("click",function(){checkboxChange=!0,$(this).find("em").hasClass("active")?$(this).find("em").removeClass("active"):$(this).find("em").addClass("active")})})}function createConfirm(e,t){var a=$('<button id="confirm" class="confirm">确定</button>');$(".ct").append(a),a.bind("touchstart",function(){$(this).addClass("touching")}),a.bind("touchend",function(){$(this).removeClass("touching")}),a.bind("click",function(){var e=[],a=[];$("#container .item").each(function(){$(this).find("em").hasClass("active")&&(e.push($(this).attr("value")),a.push($(this).attr("atext")+",")),$(t).attr("value",e),$(t).html(a),$(t).attr("class","active"),$(".ct").remove(),$("body").css({overflow:"scroll",height:"auto"})})})}function htmlencode(e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML}function htmldecode(e){var t=document.createElement("div");return t.innerHTML=e,t.innerText||t.textContent}function curTime(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,i=e.getDate();10>a&&(a="0"+String(a)),10>i&&(i="0"+String(i));var n=t+"-"+a+"-"+i;return n}function Appendzero(e){return 10>e?"0"+e:e}$(document).bind("ready",function(){footerSkip(),errInfo()});var arr_color=["#78c06e","#f65e8d","#f6bf26","#3bc2b5","#5c6bc0","#f65e5e","#5e97f6","#9a89b9","#bd84cd","#6bb5ce","#a1887f","#ff943e","#5ec9f6","#c5cb63","#ff8e6b","#78919d"];Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1},Array.prototype.remove=function(e){var t=this.length;e>=0&&t>e&&this.splice(e,1)},jQuery.fn.extend({autoHeight:function(){function e(e){var t=jQuery(e);return t.css({height:t.attr("_initAdjustHeight"),"overflow-y":"hidden"}).height(e.scrollHeight)}return this.each(function(){var t=jQuery(this);t.attr("_initAdjustHeight")||t.attr("_initAdjustHeight",t.outerHeight()),e(this),e(this).on("input",function(){e(this)})})}}),String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};var postData,setPost=!1,accountpageNo=0,accountpageSize=20,accountArr=[],scroolpange=0,warp=$('<div class="warp"></div>'),accountlistScroll,checkboxMember={},checkboxChange=!1;!function(e){e.extend({myTime:{CurTime:function(){return Date.parse(new Date)/1e3},DateToUnix:function(e){var t=e.split(" ",2),a=(t[0]?t[0]:"").split("-",3),i=(t[1]?t[1]:"").split(":",3);return new Date(parseInt(a[0],10)||null,(parseInt(a[1],10)||1)-1,parseInt(a[2],10)||null,parseInt(i[0],10)||null,parseInt(i[1],10)||null,parseInt(i[2],10)||null).getTime()/1e3},UnixToDate:function(e,t,a){"number"==typeof a&&(e=parseInt(e)+60*parseInt(a)*60);var i=new Date(1e3*e),n="";return n+=i.getUTCFullYear()+"-",n+=i.getUTCMonth()+1+"-",n+=i.getUTCDate(),t===!0&&(n+=" "+i.getUTCHours()+":",n+=i.getUTCMinutes()+":",n+=i.getUTCSeconds()),n}}})}(jQuery);