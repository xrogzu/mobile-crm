function st(o){var n=$(o),e=n.offset().top;window.scrollTo(0,e)}var getMethod=function(o,n){for(var e=o.split("."),t=n||dd,i=0,c=e.length;c>i;i++){if(i===c-1)return t[e[i]];"undefined"==typeof t[e[i]]&&(t[e[i]]={}),t=t[e[i]]}};console.log("钉钉版本号：",dd.version),dd.error(function(o){console.log(o)}),dd.ready(function(o){var n=window.CONFIG||{corpId:_config.corpId,users:["02024763207326"]};$(".J_method_btn").on("click",function(){var o=$(this),e=o.data("method"),t=o.data("action"),i=o.data("param")||{};"string"==typeof i&&(i=JSON.parse(i)),i.corpId&&(i.corpId=n.corpId,i.id&&(i.id=n.users[0]),i.users&&(i.users=n.users)),i.params&&i.params.corpId&&(i.params.corpId=n.corpId,i.params.id&&(i.params.id=n.users[0]),i.params.users&&(i.params.users=n.users)),i.onSuccess=function(o){console.log(e,"调用成功，success",o),"alert"===t&&dd.device.notification.alert({title:e,message:"传参："+JSON.stringify(i,null,4)+"\n响应："+JSON.stringify(o,null,4)})},i.onFail=function(o){console.log(e,"调用失败，fail",o)},getMethod(e)(i)}),$(".J_method_out_btn").on("click",function(){var o=$(this),n=o.data("method"),e=o.data("action"),t=o.data("param")||{};"string"==typeof t&&(t=JSON.parse(t));var i=getMethod(n,window);"alert"===e&&dd.device.notification.alert({title:n,message:JSON.stringify(i,null,4)})}),$(".J_shake").on("click",function(){dd.device.accelerometer.watchShake({sensitivity:15,frequency:150,callbackDelay:1e3,onSuccess:function(o){console.log("watchShake success",o),dd.device.notification.vibrate({duration:300,onSuccess:function(){console.log("……………………震动……………………")},onFail:function(){console.log("木有震动")}})},onFail:function(o){console.log("error",o)}})}),$(".J_nav_left").on("click",function(){dd.biz.navigation.setLeft({control:!0,text:"取消",onSuccess:function(o){console.log("左侧导航回调",o),dd.device.notification.confirm({message:" 点确定重置左侧按钮，点取消返回上一页",title:"操作",buttonLabels:["确定","取消"],onSuccess:function(o){var n=o.buttonIndex;0===n?(console.log("弹窗回调",o,"准备恢复左侧导航"),dd.biz.navigation.setLeft({control:!1,text:"",onSuccess:function(o){console.log("左侧导航恢复完成",o)},onFail:function(){}})):(console.log("调用导航回退"),dd.biz.navigation.back())},onFail:function(){}})},onFail:function(){}})}),$(".J_nav_right").on("click",function(){dd.biz.navigation.setRight({control:!0,text:"发送",onSuccess:function(o){console.log("右侧导航回调",o),dd.device.notification.confirm({message:"点击了发送按钮， 要还原按钮状态吗？",title:"操作",buttonLabels:["好的","取消"],onSuccess:function(o){var n=o.buttonIndex;0===n?(console.log("弹窗回调",o,"准备恢复右侧导航"),dd.biz.navigation.setRight({control:!1,text:"",onSuccess:function(o){console.log("右侧导航恢复完成",o)},onFail:function(){}})):console.log("弹窗回调",o,"什么也不干")},onFail:function(){}})},onFail:function(){}})}),$(".J_loading").on("click",function(){var o=$(this),n=o.data("method"),e=(o.data("action"),o.data("param")||{});"string"==typeof e&&(e=JSON.parse(e)),e.onSuccess=function(o){console.log(n,"调用成功，success",o),setTimeout(function(){dd.device.notification.hidePreloader()},3e3)},e.onFail=function(o){console.log(n,"调用失败，fail",o)},getMethod(n)(e)}),$(".J_pull_to_refresh").on("click",function(){dd.ui.pullToRefresh.enable({onSuccess:function(o){console.log("下拉刷新回调",o),dd.device.notification.confirm({message:"点击确定2s后收起loading",title:"",buttonLabels:["确定","取消"],onSuccess:function(o){var n=o.buttonIndex;0===n?(setTimeout(function(){dd.ui.pullToRefresh.stop()},2e3),console.log("收起下拉刷新")):console.log("取消")},onFail:function(){}})},onFail:function(){}})}),$(".J_upload").on("click",function(){var o=$(this),n=o.data("method"),e=o.data("action"),t=o.data("param")||{};"string"==typeof t&&(t=JSON.parse(t)),t.onSuccess=function(o){if(console.log(n,"调用成功，success",o),o&&o.length>0){var i="http://dingtalk.aliapp.com/ox";$.ajax({url:i,type:"get",data:{k:"jsapiupload",text:o.join(",")},dataType:"jsonp",jsonp:"callback",success:function(o){console.log(o)},error:function(o){console.log("上传服务器失败",o)}})}"alert"===e&&dd.device.notification.alert({title:n,message:"传参："+JSON.stringify(t,null,4)+"\n响应："+JSON.stringify(o,null,4)})},t.onFail=function(o){console.log(n,"调用失败，fail",o)},getMethod(n)(t)}),$(document).on("click",".J_set_account",function(){o.callHandler("getAccount","10007",function(o){alert(o),location.href="http://oa.new-see.com/history.html"})}),document.addEventListener("pause",function(o){o.preventDefault(),console.log("事件：pause")},!1),document.addEventListener("resume",function(o){o.preventDefault(),console.log("事件：resume")},!1),document.addEventListener("online",function(o){o.preventDefault(),console.log("事件：online")},!1),document.addEventListener("offline",function(o){o.preventDefault(),console.log("事件：offline")},!1),document.addEventListener("swipeRefresh",function(o){o.preventDefault(),console.log("事件：swipeRefresh")},!1)}),$(document).on("change",".J_file",function(o){var n=$(this),e=n.data("type"),t=this.files[0];console.log(this.value);for(var i in t)console.log(i,":",t[i]);var c;switch(e){case"create":c=window.URL.createObjectURL(t),console.log(c),$("body").append('<img src="'+c+'"/>');break;case"reader":var a=new FileReader;a.onload=function(o){$("body").append('<img src="'+o.target.result+'"/>')},a.readAsDataURL(t)}});